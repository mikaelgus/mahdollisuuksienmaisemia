<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="/css/output.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cantarell&display=swap"
      rel="stylesheet"
    />
    <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet" />
    <link
      href="https://unpkg.com/video.js@7/dist/video-js.min.css"
      rel="stylesheet"
    />
    <!-- <link href="https://unpkg.com/@videojs/themes@1/dist/fantasy/index.css" rel="stylesheet"> -->
    <link href="css/omaTeema.css" rel="stylesheet" />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/2.4.2/chroma.min.js"
      integrity="sha512-zInFF17qBFVvvvFpIfeBzo7Tj7+rQxLeTJDmbxjBz5/zIr89YVbTNelNhdTT+/DCrxoVzBeUPVFJsczKbB7sew=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script defer src="../js/chat.js"></script>
  </head>
  <style>
    .audioButton {
      border: 0;
      background: transparent;
      box-sizing: border-box;
      width: 0;
      height: 74px;
      border-color: transparent transparent transparent #202020;
      transition: 100ms all ease;
      cursor: pointer;
      border-style: solid;
      border-width: 37px 0 37px 30px;
      transform: scale(0.8,0.5);
    }
    .audioButton.paused {
      border-style: double;
      border-width: 0px 0 0px 40px;
    }
    .audioButton:hover {
      border-color: black black black #404040;
    }
  </style>

  <body class="bg-black m-20">
    <header class="">
      <div class="flex justify-center mb-2">
        <p class="text-whiteGrey font-main tracking-widest text-2xl">
          Mahdollisuuksien maisema
        </p>
      </div>

      <div class="flex justify-center">
        <a class="mx-1" href="index.html">
          <button
            class="gradientBtn bg-black rounded border-2 border-transparent relative text-sm p-1"
          >
            <p class="text-whiteGrey font-main tracking-widest">Koti</p>
          </button>
        </a>
        <a class="mx-1" href="ohjelma.html">
          <button
            class="gradientBtn bg-black rounded border-2 border-transparent relative text-sm p-1"
          >
            <p class="text-whiteGrey font-main tracking-widest">Ohjelma</p>
          </button>
        </a>
        <a class="mx-1" href="yhteystiedot.html">
          <button
            class="gradientBtn bg-black rounded border-2 border-transparent relative text-sm p-1"
          >
            <p class="text-whiteGrey font-main tracking-widest">Yhteystiedot</p>
          </button>
        </a>
      </div>

      <div class="flex justify-end">
        <audio id="player" src="media/hamahakkimies.mp3"></audio>
          <button
            class="audioButton"
          ></button>
      </div>
    </header>

    <section class="grid grid-cols-3 gap-4 mt-10">
      <div
        class="border-box col-span-2 h-auto rounded border-2 border-whiteGrey"
      >
        <video
          id="my-player"
          class="video-js vjs-theme-fantasy"
          controls
          preload="auto"
          width="640"
          height="264"
          poster=""
          data-setup="{}"
          style="max-width: 100%"
        >
          <source src="../media/sea_animation.mp4" type="video/mp4" />
          <source src="MY_VIDEO.webm" type="video/webm" />
          <p class="vjs-no-js">
            To view this video please enable JavaScript, and consider upgrading
            to a web browser that
            <a href="https://videojs.com/html5-video-support/" target="_blank"
              >supports HTML5 video</a
            >
          </p>
        </video>
      </div>

      <div class="h-auto rounded border-2 border-whiteGrey">
        <form id="join">
          <h3><p class="text-whiteGrey">ensin käyttäjänimi:</p></h3>
          <p class="text-whiteGrey">
            Käytä vain kirjaimia ja numeroita (min. 3 merkkiä)
          </p>
          <input
            type="text"
            id="username"
            placeholder="Chattinimi"
            pattern="[A-Öa-ö0-9].{3,}"
            autocomplete="off"
          />
          <button
            class="rounded border-2 border-whiteGrey"
            id="joinBtn"
            type="submit"
          >
            <p class="text-whiteGrey">Aseta nimmari</p>
          </button>
          <p id="nameError"></p>
        </form>
        <form id="form">
          <!-- <h3><p class="text-whiteGrey">Kirjota viesti</p></h3> -->
          <div style="width: 300px">
            <input
              type="text"
              id="input"
              placeholder="Kirjoita viesti"
              autocomplete="off"
            />
          </div>

          <button
            class="rounded border-2 border-whiteGrey"
            id="chatBtn"
            type="submit"
          >
            <p class="text-whiteGrey">Tumppaa viesti</p>
          </button>
        </form>
        <ul
          class="rounded border-2 border-whiteGrey"
          id="messages"
          style="list-style-type: none"
        ></ul>
      </div>

      <div class="col-span-3 h-40 rounded border-2 border-whiteGrey">
        <p class="text-whiteGrey">Informaatio</p>
        >
      </div>
    </section>

    <section class="grid grid-cols-2 gap-4 mt-10">
      
      <button
        class="modal-open gradientBtn bg-black h-28 rounded border-2 border-black relative text-sm font-medium text-whiteGrey" 
        >
        <div class="grid grid-rows-3 grid-cols-7 gap-1 h-full">
          <div class="col-span-3 row-span-3 bg-contain" style="background-image: url(media/light5.jpeg);"></div> <!--<img  src="media/light5.jpeg" alt="jokuKuva">-->
          <div class="col-span-3 col-end-8 text-left p-1">
            <p class="items-center text-base">
              Valojuhla
            </p></div>
          <div class="col-span-4 text-left p-1">
            <p class="flex items-center text-base">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5" />
              </svg>
              &nbsp;&nbsp;17.10.2022
          </p></div>
          <div class="col-span-4 text-left p-1">
            <p class="flex items-center text-base">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg> 
              &nbsp;&nbsp;19:00
            </p></div>
        </div>
      
      </button>

      <div class="modal opacity-0 pointer-events-none fixed w-full h-full top-0 left-0 flex items-center justify-center">
        <div class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50"></div>
        
        <div class="modal-container bg-white w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto">
          
          <div class="modal-close absolute top-0 right-0 cursor-pointer flex flex-col items-center mt-4 mr-4 text-white text-sm z-50">
            <svg class="fill-current text-white" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18">
              <path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path>
            </svg>

          </div>
    
          <!-- Add margin if you want to see some of the overlay behind the modal-->
          <div class="modal-content py-4 text-left px-6">
            <!--Title-->
            <div class="flex justify-between items-center pb-3">
              <p class="text-2xl font-bold">Simple Modal!</p>
              <div class="modal-close cursor-pointer z-50">
                <svg class="fill-current text-black" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18">
                  <path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path>
                </svg>
              </div>
            </div>
    
            <!--Body-->
            <p>Modal content can go here</p>
            <p>...</p>
            <p>...</p>
            <p>...</p>
            <p>...</p>
    
            <!--Footer-->
            <div class="flex justify-end pt-2">
              <button class="modal-close px-4 bg-indigo-500 p-3 rounded-lg text-white hover:bg-indigo-400">Close</button>
            </div>
            
          </div>
        </div>
      </div>




      <button
        class="bg-black h-28 rounded border-2 border-whiteGrey text-sm font-medium text-whiteGrey"
      >
      </button>

      <button
        class="bg-black h-28 rounded border-2 border-whiteGrey text-sm font-medium text-whiteGrey"
      >
        Purple to blue
      </button>

      <button
        class="bg-black h-28 rounded border-2 border-whiteGrey text-sm font-medium text-whiteGrey"
      >
        Purple to blue
      </button>

      <button
        class="bg-black h-28 rounded border-2 border-whiteGrey text-sm font-medium text-whiteGrey"
      >
        Purple to blue
      </button>

      <button
        class="bg-black h-28 rounded border-2 border-whiteGrey hover:border-gradi text-sm font-medium text-whiteGrey"
      >
        Purple to blue
      </button>
    </section>

    <script>
      let buttons = document.querySelectorAll(".gradientBtn");
      const colorScale = chroma
        .scale(["#FF00F5", "#00F0FF", "#00FF19", "#FAFF00"])
        .domain([0, 0.7, 0.6, 0.9]);

      const bodyHeight = window.innerHeight;
      const bodyWidth = document
        .querySelector("body")
        .getBoundingClientRect().width;

      function colorButtons() {
        buttons.forEach((button) => {
          button.onmouseover = function (event) {
            let height = button.getBoundingClientRect().y;
            let width = button.getBoundingClientRect().x;
            let percentageLeftCorner =
              (height / bodyHeight + width / bodyWidth) / 2;
            let percentageRightCorner =
              ((height + button.offsetHeight) / bodyHeight +
                (button.offsetWidth + width) / bodyWidth) /
              2;

            // button.style.borderStyle = `solid`;
            button.classList.add("gradiantButton");
            button.style.borderImage = `linear-gradient(120deg,${colorScale(
              percentageLeftCorner
            )},${colorScale(percentageRightCorner)}) 10`;
          };
          button.onmouseleave = function () {
            button.style = ``;
            button.classList.remove("gradiantButton");
          };
        });
      }
      colorButtons();
      //window.addEventListener('scroll', function(){
      //    colorButtons()
      //})
      let toggled = false;
      document
        .querySelector(".audioButton")
        .addEventListener("click", (event) => {
          if (!toggled) {
            event.target.classList.add("paused");
            document.getElementById('player').play()
            toggled = true;
          } else {
            event.target.classList.remove("paused");
            document.getElementById('player').pause()
            toggled = false;
          }
        });




        var openmodal = document.querySelectorAll('.modal-open')
    for (var i = 0; i < openmodal.length; i++) {
      openmodal[i].addEventListener('click', function(event){
    	event.preventDefault()
    	toggleModal()
      })
    }
    
    const overlay = document.querySelector('.modal-overlay')
    overlay.addEventListener('click', toggleModal)
    
    var closemodal = document.querySelectorAll('.modal-close')
    for (var i = 0; i < closemodal.length; i++) {
      closemodal[i].addEventListener('click', toggleModal)
    }
    
    document.onkeydown = function(evt) {
      evt = evt || window.event
      var isEscape = false
      if ("key" in evt) {
    	isEscape = (evt.key === "Escape" || evt.key === "Esc")
      } else {
    	isEscape = (evt.keyCode === 27)
      }
      if (isEscape && document.body.classList.contains('modal-active')) {
    	toggleModal()
      }
    };
    
    
    function toggleModal () {
      const body = document.querySelector('body')
      const modal = document.querySelector('.modal')
      modal.classList.toggle('opacity-0')
      modal.classList.toggle('pointer-events-none')
      body.classList.toggle('modal-active')
    }
    </script>

    <script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>
    <script src="http://127.0.0.1:3000/socket.io/socket.io.js"></script>
  </body>
</html>
